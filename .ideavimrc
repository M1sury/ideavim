" ================æ’ä»¶====================
" æ¯”å¦‚: String str = "123"ï¼Œå¯ä»¥ç”¨cs"' æŠŠåŒå¼•å·å˜æˆå•å¼•å·
Plug 'tpope/vim-surround'

" ä½¿ç”¨<leader> e ç›®å½•æ ‘å‘¼å‡º
" qå…³é—­æ‰“å¼€çš„ç›®å½•æ ‘
" pè·³è½¬åˆ°å½“å‰ç›®å½•çš„çˆ¶çº§ç›®å½•
" xå…³é—­å½“å‰ç›®å½•æ‰“å¼€çš„æ–‡ä»¶å¤¹
" Jå½“å‰ç›®å½•ä¸‹å¤šä¸ªæ–‡ä»¶/æ–‡ä»¶å¤¹è·³è½¬åˆ°æœ€ä¸‹é¢çš„æ–‡ä»¶/æ–‡ä»¶å¤¹
" Kå½“å‰ç›®å½•ä¸‹å¤šä¸ªæ–‡ä»¶/æ–‡ä»¶å¤¹è·³è½¬åˆ°æœ€ä¸Šé¢çš„æ–‡ä»¶/æ–‡ä»¶å¤¹
" oæ‰“å¼€å½“å‰å…‰æ ‡æ‰€åœ¨çš„æ–‡ä»¶/æ–‡ä»¶å¤¹
Plug 'preservim/nerdtree'

" å¯ä»¥å¿«é€Ÿè·³è½¬åˆ°ä½ çœ¼ç›æƒ³å»çš„åœ°æ–¹ï¼Œé»˜è®¤çš„è¯ç”¨leaderé”®(ç©ºæ ¼)ss ç„¶åè¾“å…¥ä½ æƒ³åˆ°çš„ä½ç½®çš„å•è¯,ç„¶åå°±æœ‰æç¤ºå­—æ¯ï¼ŒæŒ‰ä¸‹æç¤ºå­—æ¯å°±å¯ä»¥è¿›è¡Œè·³è½¬
Plug 'easymotion/vim-easymotion'


" ================================================================================================
" = åŸºç¡€é…ç½® =====================================
" ================================================================================================
set clipboard+=unnamed     " ideavimçš„å‰ªåˆ‡æ¿å’Œç³»ç»Ÿçš„å‰ªåˆ‡æ¿æ•°æ®äº’é€š
set showmode               " æ˜¾ç¤ºå½“å‰æ¨¡å¼
set ignorecase             " ä¸åŒºåˆ†å¤§å°å†™
set scrolloff=30
set history=200
set number                 " number æ˜¯å¼€å¯è¡Œå·æ˜¾ç¤º
set relativenumber         " relativenumberæ˜¯å¼€å¯ç›¸å¯¹è¡Œå·æ˜¾ç¤º

set incsearch hlsearch     " æœç´¢ç›¸å…³: hlsearché«˜äº®æœç´¢æ¡ä»¶

" é«˜æ•ˆç¼–è¾‘æ–¹æ³•å‚æ•°ï¼Œæ¯”å¦‚caa,daa,vaaç­‰ï¼Œå¯ä»¥å°è¯•
set argtextobj

set sneak                 " ä½¿ç”¨ s æˆ–è€… S ç„¶åè·Ÿç€ä¸¤ä¸ªå­—ç¬¦è¿›è¡Œå¿«é€Ÿè·³è½¬

set ideajoin              " ä½¿ç”¨ctrl + j å¯ä»¥æŠŠä¸¤ä¸ªå­—ç¬¦ä¸²è¿›è¡Œæ‹¼æ¥èµ·æ¥

" ä½¿ç”¨jk å’Œ kj ä»£æ›¿ ESCé”®(æˆ‘å·²ç»ä¹ æƒ¯äº†ctrl+cäº†ï¼Œæœ‰éœ€è¦å¯ä»¥æ‰“å¼€æ³¨é‡Š)
" imap jk <Esc>
" imap kj <Esc>
set timeoutlen=300


" ================================================================================================
" = No Leader Keymaps =====================================
" ================================================================================================
" æ’å…¥æ¨¡å¼ä¸‹çš„ç§»åŠ¨
" ctrl + hjkl è¿›è¡Œä¸Šä¸‹å·¦å³ç§»åŠ¨
imap <C-h> <Left>
imap <C-j> <Down>
imap <C-k> <Up>
imap <C-l> <Right>


" pasteä¹‹åä¸ä¼šæŠŠyankçš„å†…å®¹æ›¿æ¢æ‰
vmap p _dp

" è·³è½¬åˆ°ä¸‹ä¸€ä¸ªé”™è¯¯çš„åœ°æ–¹
nmap ge <action>(GotoNextError)
" è·³è½¬åˆ°å¯¹åº”çš„æµ‹è¯•ç±»
nmap gt <action>(GotoTest)
" åœ¨æ–¹æ³•é‡Œä¼šè·³è½¬åˆ°æ–¹æ³•åï¼Œå†gmä¼šè·³è½¬åˆ°ä¸Šé¢ä¸€ä¸ªæ–¹æ³•çš„æ–¹æ³•å
nmap gm <action>(MethodUp)
" è·³è½¬åˆ°å¯¹åº”çš„å®ç°ç±»
nmap gi <action>(GotoImplementation)
" last changed in current buffer(file)
nmap ga '.
" è¿”å›æ“ä½œ
nmap gb <action>(Back)

" bookmark in whole program
nmap ma mA
nmap 'a 'A
nmap ms mS
nmap 's 'S
nmap md mD
nmap 'd 'D
nmap mf mF
nmap 'f 'F

" åˆ é™¤ä»å½“å‰å­—ç¬¦åˆ°ç»“å°¾çš„å†…å®¹
nmap df d$
" åˆ é™¤ä»å½“å‰å­—ç¬¦åˆ°å¼€å§‹çš„å†…å®¹
nmap dl d^

" æ™®é€šæ¨¡å¼ä¸‹ï¼Œæ‰“å¼€çš„æ–‡ä»¶å·¦å³ç§»åŠ¨ï¼ŒLç§»åŠ¨åˆ°å·¦è¾¹æ‰“å¼€çš„æ–‡ä»¶ï¼ŒHæ˜¯å³è¾¹
nmap L <action>(NextTab)
nmap H <action>(PreviousTab)

" =================ä»¥ä¸Šå†…å®¹ä¸éœ€è¦ä½¿ç”¨leaderé”®è¾…åŠ©ä½¿ç”¨ï¼Œä¸‹é¢çš„é”®ä½éœ€è¦leaderé”®è¾…åŠ©ï¼Œæœ¬äººä½¿ç”¨çš„æ˜¯ç©ºæ ¼é”®ä½œä¸ºleader=============================


" leaderkey
let mapleader=" "

" ================================================================================================
" ğŸ‘»ğŸ‘»ğŸ‘» Which-Key ğŸ‘»ğŸ‘»ğŸ‘»
set which-key
set notimeout

" ================================================================================================

" f: æŸ¥æ‰¾ â­ï¸
let g:WhichKeyDesc_FindOrFormat = "<leader>f FindOrFormat"
let g:WhichKeyDesc_FindOrFormat_FindFile = "<leader>ff FindFile"
nmap <leader>ff <action>(GotoFile)
let g:WhichKeyDesc_FindOrFormat_FindFileLocation = "<leader>fl FindFileLocation"
nmap <leader>fl <action>(SelectInProjectView)

let g:WhichKeyDesc_FindOrFormat_FindText = "<leader>ft FindText"
nmap <leader>ft <action>(FindInPath)

let g:WhichKeyDesc_FindOrFormat_Commands = "<leader>fc Commands"
nmap <leader>fc <action>(GotoAction)

let g:WhichKeyDesc_FindOrFormat_OpenedProject = "<leader>fp OpenedProject"
nmap <leader>fp <action>(OpenProjectWindows)

let g:WhichKeyDesc_FindOrFormat_Format = "<leader>fm Format"
nmap <leader>fm <action>(ReformatCode) \| <action>(OptimizeImports)

" =====================================================================================

" g: Git â­ï¸
let g:WhichKeyDesc_Git = "<leader>g Git"
let g:WhichKeyDesc_Git_RollbackHunk = "<leader>gr RollbackHunk"
nmap <leader>gr :action Vcs.RollbackChangedLines<CR>


" =====================================================================================

" i: Insert â­ï¸
let g:WhichKeyDesc_InsertAfterBrackets = "<leader>i InsertAfterBrackets"
nmap <leader>i f(a

" =====================================================================================

" j: add Semicolon and goto nextlineâ­ï¸
let g:WhichKeyDesc_InsertSemicolon = "<leader>j InsertSemicolon"
nmap <leader>j A;<ESC>o

" =====================================================================================

" n: å–æ¶ˆé«˜äº® â­ï¸
let g:WhichKeyDesc_No_Highlight = "<leader>nl NoHighlight"
nmap <leader>nl :nohlsearch<CR>

" =====================================================================================

" s: Show â­ï¸
let g:WhichKeyDesc_Show = "<leader>s Show"

" å±•ç¤ºæ–‡ä»¶ç»“æ„(å‡½æ•°å’Œæˆå‘˜å˜é‡ç­‰ç­‰)
let g:WhichKeyDesc_Show_FileStructue = "<leader>ss ShowFileStructure"
nmap <leader>ss <action>(FileStructurePopup)

let g:WhichKeyDesc_Show_Bookmarks = "<leader>sb ShowBookmarks"
nmap <leader>sb <action>(ShowBookmarks)

" =====================================================================================

" r: Run/Re â­ï¸
let g:WhichKeyDesc_RunOrRe = "<leader>r RunOrRe"

let g:WhichKeyDesc_RunOrRe_ReRun = "<leader>rr ReRun"
nmap <leader>rr <action>(Rerun)

let g:WhichKeyDesc_RunOrRe_ReRunTests = "<leader>rt ReRunTests"
nmap <leader>rt <action>(RerunTests)

" å¯¹é€‰ä¸­çš„å…ƒç´ (å‡½æ•°/å˜é‡)è¿›è¡Œé‡å‘½åæ“ä½œ
let g:WhichKeyDesc_RunOrRe_Rename = "<leader>rn Rename"
nmap <leader>rn <action>(RenameElement)

" =====================================================================================

" w: çª—å£åˆ†å‰²ï¼Œè·³è½¬ â­ï¸
nmap <leader>ww <C-W>w
nmap <leader>wd <C-W>c
nmap <leader>wj <C-W>j
nmap <leader>wk <C-W>k
nmap <leader>wh <C-W>h
nmap <leader>wl <C-W>l
nmap <leader>ws <C-W>s
nmap <leader>w- <C-W>s
nmap <leader>wv <C-W>v
nmap <leader>w\| <C-W>v

" =====================================================================================

" z: zip(fold) â­ï¸
let g:WhichKeyDesc_Zip = "<leader>z Zip"
let g:WhichKeyDesc_Zip_unZipAll = "<leader>zo unZipAll"
nmap <leader>zo <action>(ExpandAllRegions)
let g:WhichKeyDesc_Zip_ZipAll = "<leader>zc ZipAll"
nmap <leader>zc <action>(CollapseAllRegions)

" =====================================================================================

" c: å…³é—­æ‰“å¼€çš„æ–‡ä»¶ â­ï¸;
let g:WhichKeyDesc_CloseBuffer = "<leader>c CloseBuffer"
" <Leader>cc: å…³é—­å½“å‰æ‰“å¼€çš„Buffer
nmap <leader>c :q!<CR>
" <Leader>cr: å…³é—­å½“å‰æ‰“å¼€çš„Bufferå³ä¾§çš„Buffer
nmap <leader>cr <action>(CloseAllToTheRight)
" <leader>cl: å…³é—­å½“å‰æ‰“å¼€çš„Bufferå·¦ä¾§çš„Buffer
nmap <leader>cl <action>(CloseAllToTheLeft)
" <leader>ce: å…³é—­é™¤äº†å½“å‰Bufferå¤–å…¶ä»–è¢«æ‰“å¼€çš„Buffer
nmap <leader>ce <action>(CloseAllEditorsButActive)

" =====================================================================================

" e: é¡¹ç›®å¯¼èˆªæ  â­ï¸
let g:WhichKeyDesc_ToggleExplorerOrExtract = "<leader>e ToggleExplorer"
nmap <leader>e <action>(ActivateProjectToolWindow)

" e: Extract,è§†è§‰æ¨¡å¼ä¸‹æ‰èµ·ä½œç”¨
" å‡½æ•°æŠ½å–
vmap <leader>em <action>(ExtractMethod)
" å¸¸é‡æŠ½å–
vmap <leader>ec <action>(IntroduceConstant)
" å­—æ®µæŠ½å–
vmap <leader>ef <action>(IntroduceField)
" å˜é‡æŠ½å–
vmap <leader>ev <action>(IntroduceVariable)

" =====================================================================================

" maven/gradle åˆ·æ–°é¡¹ç›®
let g:WhichKeyDesc_RefreshProject = "<leader>m RefreshProject";
nmap <leader>ms <action>(ExternalSystem.ProjectRefreshAction)

" åˆ é™¤æ•´ä¸ªæ–¹æ³•(ä½†ä¸åŒ…æ‹¬æ–¹æ³•ä¸Šçš„æ³¨é‡Š)
nmap dam :action MethodUp<cr>v0Of{%d

" ideaå’Œvimçš„å¿«æ·é”®è®¾ç½®æŒä¹…åŒ–
sethandler <C-A> a:ide
sethandler <C-C> a:vim
sethandler <C-F> a:ide
sethandler <C-G> a:ide
sethandler <C-P> a:vim
sethandler <C-Q> a:vim
sethandler <C-R> a:vim
sethandler <C-S> a:vim
sethandler <C-U> a:vim
sethandler <C-V> a:vim